<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Glide</title>
    <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
        }

        #loading {
            position: absolute;
            background-color: #0094ff;
            width: 100%;
            height: 100%;
        }
    </style>
    <script src="../libs/babylon.1.14.js"></script>
    <script src="../libs/hand-1.3.8.js"></script>
    <script src="../libs/cannon.js"></script>
</head>
<body>
    <div id="loading">
        <div id="loadingValue">0</div>
        <div>LOADING</div>
    </div>
    <canvas id="renderCanvas"></canvas>

    <script>
        var glider = {
            canvas: document.getElementById("renderCanvas"),
            camera: "",
            sailplane: "",
            engine: new BABYLON.Engine(canvas, true),
            createScene: function () {
                scene = new BABYLON.Scene(engine);
                scene.clearColor = new BABYLON.Color3(0.5, 0.5, 0.8);
                scene.gravity = new BABYLON.Vector3(0, -1, 0);
                scene.collisionsEnabled = true;
                camera = new BABYLON.FollowCamera("camera1", new BABYLON.Vector3(1, 51, 112), scene);
                camera.attachControl(canvas, false);
                var light = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(0, 1, 0), scene);
                light.intensity = .5;
                var ground = BABYLON.Mesh.CreateGroundFromHeightMap("ground", "dem1.png", 200, 200, 250, -.5, 10, scene, false);
                ground.position = new BABYLON.Vector3(0, 0, 0);
                ground.checkCollisions = true;
            },
        }

        var createScene = function () {
            var scene = 

            

            //camera = new BABYLON.FreeCamera("camera1", new BABYLON.Vector3(1, 51, 112), scene);
            //camera.setTarget(BABYLON.Vector3.Zero());

            

            function move(sailplane) {
                sailplane.position.z += 0.5;
            }

            var glider = BABYLON.SceneLoader.ImportMesh("glider", "", "sailplane.babylon", scene, function (mesh) {
                sailplane = mesh[0];
                sailplane.position = new BABYLON.Vector3(0, 25, 100);
                camera.target = sailplane;
                sailplane.checkCollisions = true;
                sailplane.applyGravity = true;
                sailplane.ellipsoid = new BABYLON.Vector3(1, 1, 1);
                move(sailplane);
            });

            if (sailplane) {
                console.log(sailplane);
            }

            return scene;


        }

        var scene = createScene();

        engine.runRenderLoop(function () {
            scene.render(); //console.log(camera.position);
        })

        window.addEventListener("resize", function () {
            engine.resize();
        })
    </script>
</body>
</html>
